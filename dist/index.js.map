{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["export default function(app, view) {\n  return {\n    state: {\n      router: match(location.pathname)\n    },\n    actions: {\n      router: {\n        match: function(state, actions, data, emit) {\n          return {\n            router: emit(\"route\", match(data))\n          }\n        },\n        go: function(state, actions, data) {\n          history.pushState({}, \"\", data)\n          actions.router.match(data.split(\"?\")[0])\n        }\n      }\n    },\n    events: {\n      loaded: function(state, actions) {\n        match()\n        addEventListener(\"popstate\", match)\n\n        function match() {\n          actions.router.match(location.pathname)\n        }\n      },\n      render: function() {\n        return view\n      }\n    }\n  }\n\n  function match(data) {\n    for (var match, params = {}, i = 0, len = app.view.length; i < len; i++) {\n      var route = app.view[i][0]\n      var keys = []\n\n      if (!match) {\n        data.replace(\n          RegExp(\n            route === \"*\"\n              ? \".\" + route\n              : \"^\" +\n                  route\n                    .replace(/\\//g, \"\\\\/\")\n                    .replace(/:([\\w]+)/g, function(_, key) {\n                      keys.push(key)\n                      return \"([-\\\\.\\\\w]+)\"\n                    }) +\n                  \"/?$\",\n            \"g\"\n          ),\n          function() {\n            for (var j = 1; j < arguments.length - 2; ) {\n              params[keys.shift()] = arguments[j++]\n            }\n            match = route\n            view = app.view[i][1]\n          }\n        )\n      }\n    }\n\n    return {\n      match: match,\n      params: params\n    }\n  }\n}\n"],"names":["app","view","match","data","params","i","len","length","route","keys","replace","RegExp","_","key","push","j","arguments","shift","state","router","location","pathname","actions","emit","go","history","pushState","split","events","loaded","addEventListener","render"],"mappings":"oMAAe,UAASA,EAAKC,GAiC3B,QAASC,GAAMC,GACb,IAAK,GAAID,GAAOE,KAAaC,EAAI,EAAGC,EAAMN,EAAIC,KAAKM,OAAQF,EAAIC,EAAKD,IAAK,CACvE,GAAIG,GAAQR,EAAIC,KAAKI,GAAG,GACpBI,IAECP,IACHC,EAAKO,QACHC,OACY,MAAVH,EACI,IAAMA,EACN,IACEA,EACGE,QAAQ,MAAO,OACfA,QAAQ,YAAa,SAASE,EAAGC,GAEhC,MADAJ,GAAKK,KAAKD,GACH,iBAEX,MACN,KAEF,WACE,IAAK,GAAIE,GAAI,EAAGA,EAAIC,UAAUT,OAAS,GACrCH,EAAOK,EAAKQ,SAAWD,UAAUD,IAEnCb,GAAQM,EACRP,EAAOD,EAAIC,KAAKI,GAAG,KAM3B,OACEH,MAAOA,EACPE,OAAQA,GAjEZ,OACEc,OACEC,OAAQjB,EAAMkB,SAASC,WAEzBC,SACEH,QACEjB,MAAO,SAASgB,EAAOI,EAASnB,EAAMoB,GACpC,OACEJ,OAAQI,EAAK,QAASrB,EAAMC,MAGhCqB,GAAI,SAASN,EAAOI,EAASnB,GAC3BsB,QAAQC,aAAc,GAAIvB,GAC1BmB,EAAQH,OAAOjB,MAAMC,EAAKwB,MAAM,KAAK,OAI3CC,QACEC,OAAQ,SAASX,EAAOI,GAItB,QAASpB,KACPoB,EAAQH,OAAOjB,MAAMkB,SAASC,UAJhCnB,IACA4B,iBAAiB,WAAY5B,IAM/B6B,OAAQ,WACN,MAAO9B"}