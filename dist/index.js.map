{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["export const Router = function(app) {\n  return {\n    actions: {\n      router: {\n        match: function(state, data, actions, emit) {\n          return {\n            router: match(data, emit)\n          }\n        },\n        go: function(state, data, actions) {\n          history.pushState({}, \"\", data)\n          actions.router.match(data)\n        }\n      }\n    },\n    events: {\n      loaded: function(state, actions) {\n        addEventListener(\"popstate\", function() {\n          actions.router.match(location.pathname)\n        })\n      },\n      render: function(state, actions, view, emit) {\n        return view[\n          (state.router || (state.router = match(location.pathname, emit)))\n            .match\n        ]\n      }\n    }\n  }\n\n  function match(data, emit) {\n    var match\n    var params = {}\n\n    for (var route in app.view) {\n      var keys = []\n\n      if (!match && route !== \"*\") {\n        data.replace(\n          new RegExp(\n            \"^\" +\n              route\n                .replace(/\\//g, \"\\\\/\")\n                .replace(/:([A-Za-z0-9_]+)/g, function(_, key) {\n                  keys.push(key)\n\n                  return \"([-A-Za-z0-9_]+)\"\n                }) +\n              \"/?$\",\n            \"g\"\n          ),\n          function() {\n            for (var i = 1; i < arguments.length - 2; ) {\n              params[keys.shift()] = arguments[i++]\n            }\n            match = route\n          }\n        )\n      }\n    }\n\n    return emit(\"route\", {\n      match: match || \"*\",\n      params: params\n    })\n  }\n}\n"],"names":["Router","app","match","data","emit","params","route","view","keys","replace","RegExp","_","key","push","i","arguments","length","shift","actions","router","state","go","history","pushState","events","loaded","addEventListener","location","pathname","render"],"mappings":"0NAAO,MAAMA,GAAS,SAASC,GA8B7B,QAASC,GAAMC,EAAMC,GACnB,GAAIF,GACAG,IAEJ,KAAK,GAAIC,KAASL,GAAIM,KAAM,CAC1B,GAAIC,KAECN,IAAmB,MAAVI,GACZH,EAAKM,QACH,GAAIC,QACF,IACEJ,EACGG,QAAQ,MAAO,OACfA,QAAQ,oBAAqB,SAASE,EAAGC,GAGxC,MAFAJ,GAAKK,KAAKD,GAEH,qBAEX,MACF,KAEF,WACE,IAAK,GAAIE,GAAI,EAAGA,EAAIC,UAAUC,OAAS,GACrCX,EAAOG,EAAKS,SAAWF,UAAUD,IAEnCZ,GAAQI,IAMhB,MAAOF,GAAK,SACVF,MAAOA,GAAS,IAChBG,OAAQA,IA9DZ,OACEa,SACEC,QACEjB,MAAO,SAASkB,EAAOjB,EAAMe,EAASd,GACpC,OACEe,OAAQjB,EAAMC,EAAMC,KAGxBiB,GAAI,SAASD,EAAOjB,EAAMe,GACxBI,QAAQC,aAAc,GAAIpB,GAC1Be,EAAQC,OAAOjB,MAAMC,MAI3BqB,QACEC,OAAQ,SAASL,EAAOF,GACtBQ,iBAAiB,WAAY,WAC3BR,EAAQC,OAAOjB,MAAMyB,SAASC,aAGlCC,OAAQ,SAAST,EAAOF,EAASX,EAAMH,GACrC,MAAOG,IACJa,EAAMD,SAAWC,EAAMD,OAASjB,EAAMyB,SAASC,SAAUxB,KACvDF"}